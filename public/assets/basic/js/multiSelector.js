(function(){ webpackJsonp([10],{0:function(e,t,i){var n=(i(1),i(61));"api"in window||(window.api={}),window.api.multiSelector=n},60:function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}},61:function(e,t,i){var n;(function(a,l){(function(){var l=function(e){if("undefined"==typeof a)return void alert("MultiSelector require jQuery");var t={container:null,seperator:",",dynamic:!1,server:"/path/to/data",data:[],maxLevel:0,fixedLevel:0,lang:{loading:"正在加载...",pleaseSelect:"请选择"},onChange:function(e,t){},selectorValue:"[data-value]",selectorTitle:"[data-title]",selectorSelect:"[data-select]",valueKey:"id",parentValueKey:"pid",titleKey:"title",sortKey:"sort",rootParentValue:0,serverMethod:"get",serverDataType:"json",serverResponseHandle:function(e){return"object"!=typeof e?(alert("ErrorResponse:"+e),[]):"code"in e&&"data"in e?0!=e.code?(alert("ErrorResponseCode:"+e.code),[]):e.data:(alert("ErrorResponseObject:"+e.toString()),[])}};this.opt=a.extend(t,e);var i=this,n=a(this.opt.container),l=n.find(this.opt.selectorSelect);this.value=null,this.title=null,this.server=null,this.seperator=",",this.maxLevel=0,this.data=[],this.initValues=[],this.initTitles=[];var r=function(){u(),l.html(i.opt.lang.loading),i.opt.dynamic&&i.initValues.length?i.val(i.initValues):i.opt.dynamic&&i.initTitles.length?i.titleVal(i.initTitles):i.opt.dynamic?o(i.opt.rootParentValue,function(e){i.data=e,l.html(""),c(1,i.opt.rootParentValue),i.initValues.length?i.val(i.initValues):i.initTitles.length&&i.titleVal(i.initTitles)}):(i.data=s(i.opt.data),l.html(""),i.initValues.length?i.val(i.initValues):i.initTitles.length?i.titleVal(i.initTitles):c(1,i.opt.rootParentValue))},o=function(e,t,n){n=n||null;var l={},r=i.opt.sortKey;l[i.opt.parentValueKey]=e,l[i.opt.titleKey]=n,a.ajax({type:i.opt.serverMethod,url:i.opt.server,dataType:i.opt.serverDataType,timeout:3e4,data:l,success:function(e){var n=i.opt.serverResponseHandle(e);n.sort(function(e,t){return e[r]-t[r]});var a=s(e.data);t(a)},error:function(){alert("请求出现错误 T_T")}})},s=function(e){for(var t=[],n=0;n<e.length;n++)t.push({parentValue:e[n][i.opt.parentValueKey],value:e[n][i.opt.valueKey],title:e[n][i.opt.titleKey]});return t},u=function(){var e=n.find(i.opt.selectorValue).val(),t=n.find(i.opt.selectorTitle).val();if(e)for(var a=e.split(i.seperator),l=0;l<a.length;l++)a[l]&&i.initValues.push(a[l]);else if(t)for(var r=t.split(i.seperator),l=0;l<r.length;l++)r[l]&&i.initTitles.push(r[l])},c=function(e,t){for(var r=[],o=i.data,s=0;s<o.length;s++)o[s].parentValue==t&&r.push({value:o[s].value,title:o[s].title});if(l.find("select").each(function(t,i){var n=parseInt(a(i).attr("data-level"));n>=e&&a(i).remove()}),r.length){var u=[];u.push('<select data-level="'+e+'" class="select">'),u.push('<option value="">'+i.opt.lang.pleaseSelect+"</option>");for(var s=0;s<r.length;s++)u.push('<option value="'+r[s].value+'">'+r[s].title+"</option>");u.push("</select>"),l.append(u.join("")),n.trigger("widget.category.rendered",[i])}},v=function(e){l.find("select").each(function(t,i){var n=parseInt(a(i).attr("data-level"));n>=e&&a(i).remove()})},p=function(){n.find(i.opt.selectorValue).val(""),n.find(i.opt.selectorTitle).val("");var e=[],t=[];l.find("select").each(function(i,n){var l=a(n).val();l&&(e.push(l),t.push(a(n).find("option:selected").text()))}),n.find(i.opt.selectorValue).each(function(t,n){var l=a(n).attr("data-level");l?(l=parseInt(l),l<=e.length&&a(n).val(e[l-1])):a(n).val(e.join(i.seperator))}),n.find(i.opt.selectorTitle).each(function(e,n){var l=a(n).attr("data-level");l?(l=parseInt(l),l<=t.length&&a(n).val(t[l-1])):a(n).val(t.join(i.seperator))}),i.value=e,i.title=t,n.trigger("widget.category.change",[i]),i.opt.onChange(e,t)};this.val=function(e){if(void 0==e)return i.value;if(i.initValues=e,!i.initValues.length)return void v(1);if(i.opt.dynamic)o(i.initValues.join(","),function(e){i.data=e,l.html(""),c(1,0);for(var t=0;t<i.initValues.length-1;t++){var n=t+2,r=i.initValues[t];(0==i.maxLevel||n<=i.maxLevel)&&c(n,r)}l.find("select").each(function(e,t){var n=a(t).attr("data-level");n&&(n=parseInt(n),n<=i.initValues.length&&a(t).val(i.initValues[n-1]))}),i.initValues=[],p()});else{c(1,i.opt.rootParentValue);for(var t=0;t<i.initValues.length;t++){var n=t+1,r=i.initValues[t],s=l.find("select");if(s.length>=n){var u=a(s.get(n-1));u.val(r).trigger("change")}}i.initValues=[]}},this.titleVal=function(e){if(void 0==e)return i.title;if(i.initTitles=e,!i.initTitles.length)return void v(1);if(i.opt.dynamic)o(null,function(e){i.data=e,l.html(""),c(1,0);for(var t=0;t<i.initTitles.length-1;t++){var n=t+2,r=i.initTitles[t],o=l.find("select[data-level="+(n-1)+"]"),s=null;o.find("option").each(function(e,t){a(t).text()==r&&(s=a(t).attr("value"))}),null!==s&&(0==i.maxLevel||n<=i.maxLevel)&&c(n,s)}l.find("select").each(function(e,t){var n=a(t).attr("data-level");if(n&&(n=parseInt(n),n<=i.initTitles.length)){var l=i.initTitles[n-1];a(t).find("option").each(function(e,t){a(t).text()==l&&a(t).prop("selected",!0)})}}),p()},i.initTitles.join(","));else{c(1,i.opt.rootParentValue);for(var t=0;t<i.initTitles.length;t++){var n=t+1,r=i.initTitles[t],s=l.find("select");if(s.length>=n){var u=a(s.get(n-1));u.find("option").each(function(e,t){a(t).text()==r&&u.val(a(t).attr("value")).trigger("change")})}}}},l.on("change","select",function(){var e=parseInt(a(this).attr("data-level")),t=a(this).val();return i.opt.dynamic?(0==i.maxLevel||e<i.maxLevel)&&(t>0?o(t,function(n){if(i.data=n,c(e+1,t),i.initValues&&i.initValues.length){var r=l.find("select");if(!r.length)return;var o=a(r.get(r.length-1));o.val(i.initValues.splice(0,1)[0]).trigger("change")}else if(i.initTitles&&i.initTitles.length){var r=l.find("select");if(!r.length)return;var o=a(r.get(r.length-1)),s=i.initTitles.splice(0,1)[0];o.find("option").each(function(e,t){a(t).text()==s&&o.val(a(t).attr("value")).trigger("change")})}p()}):(v(e+1),p())):(0==i.maxLevel||e<i.maxLevel)&&(t>0?c(e+1,t):v(e+1),p()),!1}),r()};"undefined"!=typeof e&&"object"==typeof t&&i(60).cmd?e.exports=l:(n=function(){return l}.call(t,i,t,e),!(void 0!==n&&(e.exports=n)))}).call(function(){return this||("undefined"!=typeof window?window:l)}())}).call(t,i(1),function(){return this}())}});; })();