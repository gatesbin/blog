var Player=function(t){var a=$(t),i=function(t){t=parseInt(t);var a=Math.floor(t/60),i=Math.floor(t%60);return(a<10?"0":"")+a+":"+(i<10?"0":"")+i},n={timer:null,running:!1,reset:function(){},start:function(){n.running=!0,n.timer&&setInterval(n.timer),n.timer=setInterval(function(){n.running&&(a.find("[data-time-total]").html(i(a.find("audio").get(0).duration)),a.find("[data-time-play]").html(i(a.find("audio").get(0).currentTime)),a.find("[data-time-bar]").css({width:100*a.find("audio").get(0).currentTime/a.find("audio").get(0).duration+"%"}),a.is(":visible")&&a.find("audio").get(0).duration!=a.find("audio").get(0).currentTime||(a.find("audio").get(0).pause(),n.stop(),a.find("[data-pause]").hide(),a.find("[data-play]").show()))},25)},stop:function(){n.running=!1,n.timer&&setInterval(n.timer)}};this.reset=function(){a.find("audio").get(0).pause(),a.find("audio").get(0).currentTime=0,a.find("audio").get(0).duration=0,a.find("[data-time-total]").html("-"),a.find("[data-time-play]").html("-"),a.find("[data-time-bar]").css({width:"1%"}),n.stop(),a.find("[data-pause]").hide(),a.find("[data-play]").show()};!function(){a.on("click","[data-play]",function(){return a.find("audio").get(0).play(),n.start(),a.find("[data-play]").hide(),a.find("[data-pause]").show(),!1}),a.on("click","[data-pause]",function(){return a.find("audio").get(0).pause(),n.stop(),a.find("[data-pause]").hide(),a.find("[data-play]").show(),!1}),a.on("click","[data-time-bar-box]",function(t){var i=a.find("[data-time-bar-box]"),e=(t.clientX-i.offset().left)/i.width();return!(e<0||e>1)&&(a.find("audio").get(0).currentTime=a.find("audio").get(0).duration*e,a.find("audio").get(0).play(),n.start(),a.find("[data-play]").hide(),a.find("[data-pause]").show(),!1)})}()},AudioPlayerWidget={init:function(t){if(t=t||null){var a=$(t);if(a.data("player"))return;a.data("player",new Player(t))}else $("[data-audio-player-widget]").each(function(t,a){var i=$(a);i.data("player")||i.data("player",new Player(a))})}};module.exports=AudioPlayerWidget;